(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[256],{250:(e,r,t)=>{"use strict";t.d(r,{p:()=>o});let o={auth:{login:"/login/user",register:"/create/user",verifyOtp:"/verify-otp",forgotPassword:"/update/password",profile:"/user/dashboard"},pages:{create:"/user/create/product",list:"/get/product",delete:"/delete/product",details:"/get/product",update:"/update/product"}}},1738:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>y});var o=t(7876),s=t(4232),n=t(2809),a=t(6520),i=t(7268),l=t(9892),c=t(2643),u=t(5965),d=t(3916),p=t(7685),g=t(9312),f=t(5743),h=t(9099);let y=()=>{let e=new g.A().get("email"),r=(0,h.useRouter)(),[t,y]=(0,s.useState)(["","","",""]),A=(0,s.useRef)([]),{mutate:b,isPending:m}=(0,f.gC)(),x=(e,r)=>{if(!/^\d?$/.test(r))return;let o=[...t];if(o[e]=r,y(o),r&&e<3){var s;null==(s=A.current[e+1])||s.focus()}},v=(e,r)=>{if("Backspace"===r.key&&!t[e]&&e>0){var o;null==(o=A.current[e-1])||o.focus()}},P=()=>{if(!e)return void p.Ay.error("Email not found in cookies.");let o=t.join("");if(o.length<4)return void p.Ay.error("Please enter the full 4-digit OTP.");b({email:e,otp:o},{onSuccess:()=>{r.push("/auth/login")},onError:()=>{p.Ay.error("Failed to verify OTP")}})};return(0,o.jsx)(n.A,{container:!0,justifyContent:"center",alignItems:"center",sx:{minHeight:"100vh",background:"linear-gradient(to right, #141E30, #243B55)",padding:2},children:(0,o.jsx)(d.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.4,ease:"easeOut"},children:(0,o.jsxs)(a.A,{component:"form",onSubmit:e=>{e.preventDefault(),P()},sx:{width:"100%",maxWidth:360,backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:3,padding:4,backdropFilter:"blur(10px)",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.4)",color:"#fff"},children:[(0,o.jsx)(i.A,{variant:"h5",align:"center",fontWeight:"bold",sx:{mb:1.5},children:"Verify OTP"}),e&&(0,o.jsxs)(i.A,{variant:"body2",align:"center",sx:{mb:3},children:["Sent to: ",(0,o.jsx)("strong",{children:e})]}),(0,o.jsx)(a.A,{display:"flex",justifyContent:"space-between",gap:1.5,mb:4,children:t.map((e,r)=>(0,o.jsx)(l.A,{value:e,inputRef:e=>A.current[r]=e,onChange:e=>x(r,e.target.value),onKeyDown:e=>v(r,e),inputProps:{maxLength:1,style:{textAlign:"center",fontSize:"22px",padding:"14px",color:"#fff"}},sx:{width:58,"& .MuiOutlinedInput-root":{backgroundColor:"rgba(255,255,255,0.08)",borderRadius:2,"& fieldset":{borderColor:"#fff"},"&:hover fieldset":{borderColor:"#00bcd4"},"&.Mui-focused fieldset":{borderColor:"#00bcd4"}}}},r))}),(0,o.jsx)(c.A,{type:"submit",variant:"contained",fullWidth:!0,disabled:m,sx:{p:1.5,fontWeight:"bold",fontSize:"16px",background:"#00bcd4","&:hover":{background:"#008ba3"}},children:m?(0,o.jsx)(u.A,{size:24,sx:{color:"#fff"}}):"Verify OTP"})]})})})}},2819:(e,r,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/otp",function(){return t(1738)}])},3178:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});var o=t(1040);let s=new(t(9312)).A,n=o.A.create({baseURL:"https://tureappapiforreact.onrender.com/api"});n.interceptors.request.use(function(e){let r=s.get("Token");return r&&(e.headers=e.headers||{},e.headers["x-access-token"]=r,e.headers.Authorization="Bearer ".concat(r)),console.log("Request Headers:",e.headers),e},function(e){return Promise.reject(e)});let a=n},5743:(e,r,t)=>{"use strict";t.d(r,{_L:()=>b,gC:()=>A,ge:()=>y,zo:()=>m});var o=t(250),s=t(3178);let n=async e=>{try{let{data:r}=await s.A.post(o.p.auth.login,e);return console.log("login API Response:",r),r}catch(e){console.log("Contact Form Error",e)}},a=async e=>{try{let{data:r}=await s.A.post(o.p.auth.register,e);return console.log("Register API Response:",r),r}catch(e){console.log("Contact Form Error",e)}},i=async e=>{try{let{data:r}=await s.A.post(o.p.auth.verifyOtp,e);return console.log("otp API Response:",r),r}catch(e){console.log("Contact Form Error",e)}},l=async e=>{try{let{data:r}=await s.A.post(o.p.auth.forgotPassword,e);return console.log("UpdatePassword API Response:",r),r}catch(e){console.log("Contact Form Error",e)}};var c=t(97),u=t(9312),d=t(7685),p=t(7768);let g=()=>({queryClient:(0,p.jE)()});var f=t(9321);let h=new u.A,y=()=>(0,c.n)({mutationFn:a,onSuccess:e=>{console.log("Register Mutation Response:",e),e?(h.set("email",e.user.email,{path:"/",secure:!0}),console.log("user:",e.user),d.Ay.success(e.message)):d.Ay.error("Registration failed! Please try again.")},onError:e=>{console.error("Register Mutation Error:",e),d.Ay.error("Registration failed. Please try again.")}}),A=()=>{let{queryClient:e}=g();return(0,c.n)({mutationFn:i,onSuccess:r=>{console.log("Otp Mutation Response:",r),r?d.Ay.success(r.message):d.Ay.error("Otp Verification failed! Please try again."),e.invalidateQueries({queryKey:["OTP"]})},onError:e=>{console.error("Otp Mutation Error:",e),d.Ay.error("Otp Verification failed. Please try again.")}})},b=()=>{let{queryClient:e}=g(),{setTokenAndUser:r}=(0,f.A)();return(0,c.n)({mutationFn:n,onSuccess:t=>{if(console.log("Login Mutation Response:",t),t&&t.token){var o;r(t.token),h.set("Token",t.token,{path:"/",secure:!0}),(null==(o=t.user)?void 0:o.id)&&(h.set("name",t.user.name,{path:"/",secure:!0}),h.set("user_id",t.user.id,{path:"/",secure:!0})),d.Ay.success(t.message)}else d.Ay.error("Login failed! Please try again.");e.invalidateQueries({queryKey:["LOGIN"]})},onError:e=>{console.error("Login Mutation Error:",e),d.Ay.error("Login failed. Please try again.")}})},m=()=>(0,c.n)({mutationFn:l,onSuccess:e=>{console.log("UpdatePassword Mutation Response:",e),e?d.Ay.success(e.message):d.Ay.error("Failed! Please try again.")},onError:e=>{console.error("UpdatePassword Mutation Error:",e),d.Ay.error("Failed. Please try again.")}})}},e=>{var r=r=>e(e.s=r);e.O(0,[620,811,636,593,792],()=>r(2819)),_N_E=e.O()}]);