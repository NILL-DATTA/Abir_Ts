(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[384],{250:(e,r,o)=>{"use strict";o.d(r,{p:()=>t});let t={auth:{login:"/login/user",register:"/create/user",verifyOtp:"/verify-otp",forgotPassword:"/update/password",profile:"/user/dashboard"},pages:{create:"/user/create/product",list:"/get/product",delete:"/delete/product",details:"/get/product",update:"/update/product"}}},1151:(e,r,o)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/login",function(){return o(2838)}])},2838:(e,r,o)=>{"use strict";o.r(r),o.d(r,{default:()=>P});var t=o(7876),s=o(5743),a=o(8992),n=o(1090),i=o(1408),l=o(4232),u=o(8230),c=o.n(u),d=o(2809),p=o(6520),g=o(7268),f=o(9892),h=o(2643),m=o(5965),y=o(9099),b=o(3916),A=o(7685);let w=i.Ik().shape({email:i.Yj().email("Invalid email format").required("Email is required"),password:i.Yj().min(8,"Password must be at least 8 characters").required("Password is required")}),P=()=>{var e,r;let{register:o,handleSubmit:i,formState:{errors:u}}=(0,a.mN)({resolver:(0,n.t)(w)}),{mutate:P,isPending:x}=(0,s._L)(),[v]=(0,l.useState)(!1),E=(0,y.useRouter)(),k=async e=>{P(e,{onSuccess:()=>{E.push("/cms/list")},onError:()=>{A.Ay.error("Login failed. Please check your credentials.")}})};return(0,t.jsx)(d.A,{container:!0,justifyContent:"center",alignItems:"center",sx:{minHeight:"100vh",background:"linear-gradient(to right, #141E30, #243B55)",padding:2},children:(0,t.jsx)(b.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.4,ease:"easeOut"},children:(0,t.jsxs)(p.A,{component:"form",onSubmit:i(k),sx:{width:"100%",maxWidth:"400px",margin:"0 auto",backgroundColor:"rgba(255, 255, 255, 0.15)",borderRadius:3,boxShadow:"0 10px 30px rgba(0, 0, 0, 0.3)",padding:6,backdropFilter:"blur(12px)",color:"#fff"},children:[(0,t.jsx)(g.A,{variant:"h4",align:"center",fontWeight:"bold",sx:{mb:4},children:"Sign In"}),(0,t.jsx)(f.A,{...o("email",{required:"Email is required"}),label:"Email",type:"email",fullWidth:!0,error:!!u.email,helperText:null==(e=u.email)?void 0:e.message,margin:"normal",InputLabelProps:{style:{color:"#fff"}},inputProps:{style:{fontSize:"1.05rem"}},sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"#fff"},"&:hover fieldset":{borderColor:"#00bcd4"},"&.Mui-focused fieldset":{borderColor:"#00bcd4"}},input:{color:"#fff"}}}),(0,t.jsx)(f.A,{...o("password",{required:"Password is required"}),label:"Password",type:v?"text":"password",fullWidth:!0,error:!!u.password,helperText:null==(r=u.password)?void 0:r.message,margin:"normal",autoComplete:"new-password",InputLabelProps:{style:{color:"#fff"}},inputProps:{style:{fontSize:"1.05rem"}},sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"#fff"},"&:hover fieldset":{borderColor:"#00bcd4"},"&.Mui-focused fieldset":{borderColor:"#00bcd4"}},input:{color:"#fff"}}}),(0,t.jsx)(h.A,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:4,p:2,fontWeight:"bold",fontSize:"1.1rem",background:"#00bcd4","&:hover":{background:"#008ba3"}},disabled:x,children:x?(0,t.jsx)(m.A,{size:24,color:"inherit"}):"Sign In"}),(0,t.jsxs)(g.A,{align:"center",sx:{marginTop:3},children:["Don't have an account?"," ",(0,t.jsx)(c(),{href:"/auth/registration",style:{color:"#00bcd4",textDecoration:"none"},children:"Sign Up"})]})]})})})}},3178:(e,r,o)=>{"use strict";o.d(r,{A:()=>n});var t=o(1040);let s=new(o(9312)).A,a=t.A.create({baseURL:"https://tureappapiforreact.onrender.com/api"});a.interceptors.request.use(function(e){let r=s.get("Token");return r&&(e.headers=e.headers||{},e.headers["x-access-token"]=r,e.headers.Authorization="Bearer ".concat(r)),console.log("Request Headers:",e.headers),e},function(e){return Promise.reject(e)});let n=a},5743:(e,r,o)=>{"use strict";o.d(r,{_L:()=>b,gC:()=>y,ge:()=>m,zo:()=>A});var t=o(250),s=o(3178);let a=async e=>{try{let{data:r}=await s.A.post(t.p.auth.login,e);return console.log("login API Response:",r),r}catch(e){console.log("Contact Form Error",e)}},n=async e=>{try{let{data:r}=await s.A.post(t.p.auth.register,e);return console.log("Register API Response:",r),r}catch(e){console.log("Contact Form Error",e)}},i=async e=>{try{let{data:r}=await s.A.post(t.p.auth.verifyOtp,e);return console.log("otp API Response:",r),r}catch(e){console.log("Contact Form Error",e)}},l=async e=>{try{let{data:r}=await s.A.post(t.p.auth.forgotPassword,e);return console.log("UpdatePassword API Response:",r),r}catch(e){console.log("Contact Form Error",e)}};var u=o(97),c=o(9312),d=o(7685),p=o(7768);let g=()=>({queryClient:(0,p.jE)()});var f=o(9321);let h=new c.A,m=()=>(0,u.n)({mutationFn:n,onSuccess:e=>{console.log("Register Mutation Response:",e),e?(h.set("email",e.user.email,{path:"/",secure:!0}),console.log("user:",e.user),d.Ay.success(e.message)):d.Ay.error("Registration failed! Please try again.")},onError:e=>{console.error("Register Mutation Error:",e),d.Ay.error("Registration failed. Please try again.")}}),y=()=>{let{queryClient:e}=g();return(0,u.n)({mutationFn:i,onSuccess:r=>{console.log("Otp Mutation Response:",r),r?d.Ay.success(r.message):d.Ay.error("Otp Verification failed! Please try again."),e.invalidateQueries({queryKey:["OTP"]})},onError:e=>{console.error("Otp Mutation Error:",e),d.Ay.error("Otp Verification failed. Please try again.")}})},b=()=>{let{queryClient:e}=g(),{setTokenAndUser:r}=(0,f.A)();return(0,u.n)({mutationFn:a,onSuccess:o=>{if(console.log("Login Mutation Response:",o),o&&o.token){var t;r(o.token),h.set("Token",o.token,{path:"/",secure:!0}),(null==(t=o.user)?void 0:t.id)&&(h.set("name",o.user.name,{path:"/",secure:!0}),h.set("user_id",o.user.id,{path:"/",secure:!0})),d.Ay.success(o.message)}else d.Ay.error("Login failed! Please try again.");e.invalidateQueries({queryKey:["LOGIN"]})},onError:e=>{console.error("Login Mutation Error:",e),d.Ay.error("Login failed. Please try again.")}})},A=()=>(0,u.n)({mutationFn:l,onSuccess:e=>{console.log("UpdatePassword Mutation Response:",e),e?d.Ay.success(e.message):d.Ay.error("Failed! Please try again.")},onError:e=>{console.error("UpdatePassword Mutation Error:",e),d.Ay.error("Failed. Please try again.")}})}},e=>{var r=r=>e(e.s=r);e.O(0,[620,811,992,759,230,636,593,792],()=>r(1151)),_N_E=e.O()}]);