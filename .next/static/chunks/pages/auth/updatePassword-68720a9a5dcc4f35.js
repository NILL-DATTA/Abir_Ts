(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[653],{250:(e,r,o)=>{"use strict";o.d(r,{p:()=>t});let t={auth:{login:"/login/user",register:"/create/user",verifyOtp:"/verify-otp",forgotPassword:"/update/password",profile:"/user/dashboard"},pages:{create:"/user/create/product",list:"/get/product",delete:"/delete/product",details:"/get/product",update:"/update/product"}}},3178:(e,r,o)=>{"use strict";o.d(r,{A:()=>n});var t=o(1040);let s=new(o(9312)).A,a=t.A.create({baseURL:"https://tureappapiforreact.onrender.com/api"});a.interceptors.request.use(function(e){let r=s.get("Token");return r&&(e.headers=e.headers||{},e.headers["x-access-token"]=r,e.headers.Authorization="Bearer ".concat(r)),console.log("Request Headers:",e.headers),e},function(e){return Promise.reject(e)});let n=a},3573:(e,r,o)=>{"use strict";o.r(r),o.d(r,{default:()=>m});var t=o(7876);o(4232);var s=o(2809),a=o(6520),n=o(7268),i=o(9892),l=o(2643),d=o(8992),u=o(3916),c=o(7685),p=o(9312),g=o(5743),f=o(1408),h=o(1090);let y=f.Ik({password:f.Yj().required("Password is required").min(8,"Password must be at least 8 characters")}),m=()=>{var e;let r=new p.A().get("user_id"),{register:o,handleSubmit:f,formState:{errors:m}}=(0,d.mN)({resolver:(0,h.t)(y)}),{mutate:w,isPending:A}=(0,g.zo)();return(0,t.jsx)(s.A,{container:!0,justifyContent:"center",alignItems:"center",sx:{minHeight:"100vh",background:"linear-gradient(to right, #141E30, #243B55)",padding:2},children:(0,t.jsx)(u.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.4,ease:"easeOut"},children:(0,t.jsxs)(a.A,{component:"form",onSubmit:f(e=>{if(!r)return void c.Ay.error("UserId not found in cookies.");let o={user_id:r,password:e.password,message:"",status:1};w({...o,data:o},{onSuccess:()=>{c.Ay.success("Password updated successfully!")},onError:e=>{var r,o;let t=(null==e||null==(o=e.response)||null==(r=o.data)?void 0:r.message)||"Failed to update password.";c.Ay.error(t),console.error("Error:",e)}})}),sx:{width:"100%",maxWidth:400,backgroundColor:"rgba(255, 255, 255, 0.15)",borderRadius:2,boxShadow:"0 10px 30px rgba(0, 0, 0, 0.3)",padding:4,backdropFilter:"blur(10px)",color:"#fff"},children:[(0,t.jsx)(n.A,{variant:"h4",align:"center",fontWeight:"bold",sx:{mb:2},children:"Update Password"}),(0,t.jsx)(i.A,{...o("password"),label:"Enter Password",fullWidth:!0,margin:"normal",type:"password",error:!!m.password,helperText:null==(e=m.password)?void 0:e.message,InputLabelProps:{style:{color:"#fff"},shrink:!0},sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"#fff"},"&:hover fieldset":{borderColor:"#00bcd4"},"&.Mui-focused fieldset":{borderColor:"#00bcd4"}},input:{color:"#fff"}}}),(0,t.jsx)(l.A,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:3,p:1.5,fontWeight:"bold",background:"#00bcd4","&:hover":{background:"#008ba3"}},disabled:A,children:A?"Updating...":"Update Password"})]})})})}},5743:(e,r,o)=>{"use strict";o.d(r,{_L:()=>w,gC:()=>m,ge:()=>y,zo:()=>A});var t=o(250),s=o(3178);let a=async e=>{try{let{data:r}=await s.A.post(t.p.auth.login,e);return console.log("login API Response:",r),r}catch(e){console.log("Contact Form Error",e)}},n=async e=>{try{let{data:r}=await s.A.post(t.p.auth.register,e);return console.log("Register API Response:",r),r}catch(e){console.log("Contact Form Error",e)}},i=async e=>{try{let{data:r}=await s.A.post(t.p.auth.verifyOtp,e);return console.log("otp API Response:",r),r}catch(e){console.log("Contact Form Error",e)}},l=async e=>{try{let{data:r}=await s.A.post(t.p.auth.forgotPassword,e);return console.log("UpdatePassword API Response:",r),r}catch(e){console.log("Contact Form Error",e)}};var d=o(97),u=o(9312),c=o(7685),p=o(7768);let g=()=>({queryClient:(0,p.jE)()});var f=o(9321);let h=new u.A,y=()=>(0,d.n)({mutationFn:n,onSuccess:e=>{console.log("Register Mutation Response:",e),e?(h.set("email",e.user.email,{path:"/",secure:!0}),console.log("user:",e.user),c.Ay.success(e.message)):c.Ay.error("Registration failed! Please try again.")},onError:e=>{console.error("Register Mutation Error:",e),c.Ay.error("Registration failed. Please try again.")}}),m=()=>{let{queryClient:e}=g();return(0,d.n)({mutationFn:i,onSuccess:r=>{console.log("Otp Mutation Response:",r),r?c.Ay.success(r.message):c.Ay.error("Otp Verification failed! Please try again."),e.invalidateQueries({queryKey:["OTP"]})},onError:e=>{console.error("Otp Mutation Error:",e),c.Ay.error("Otp Verification failed. Please try again.")}})},w=()=>{let{queryClient:e}=g(),{setTokenAndUser:r}=(0,f.A)();return(0,d.n)({mutationFn:a,onSuccess:o=>{if(console.log("Login Mutation Response:",o),o&&o.token){var t;r(o.token),h.set("Token",o.token,{path:"/",secure:!0}),(null==(t=o.user)?void 0:t.id)&&(h.set("name",o.user.name,{path:"/",secure:!0}),h.set("user_id",o.user.id,{path:"/",secure:!0})),c.Ay.success(o.message)}else c.Ay.error("Login failed! Please try again.");e.invalidateQueries({queryKey:["LOGIN"]})},onError:e=>{console.error("Login Mutation Error:",e),c.Ay.error("Login failed. Please try again.")}})},A=()=>(0,d.n)({mutationFn:l,onSuccess:e=>{console.log("UpdatePassword Mutation Response:",e),e?c.Ay.success(e.message):c.Ay.error("Failed! Please try again.")},onError:e=>{console.error("UpdatePassword Mutation Error:",e),c.Ay.error("Failed. Please try again.")}})},7297:(e,r,o)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/updatePassword",function(){return o(3573)}])}},e=>{var r=r=>e(e.s=r);e.O(0,[620,811,992,759,636,593,792],()=>r(7297)),_N_E=e.O()}]);